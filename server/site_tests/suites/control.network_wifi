# Copyright (c) 2010 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

AUTHOR = "Chrome OS Team"
TIME = "LONG"
NAME = "NetworkWiFi"
TEST_CATEGORY = "Stress"
TEST_CLASS = "suite"
TEST_TYPE = "server"

DOC = """
This test suite runs automated WiFi enclosure tests that should all pass.

WiFiMatFunc and WiFiSecMat make up a suite of 3-machine tests to validate
basic WiFi functionality. One client, one server, and one programmable WiFi
AP/Router are required (either off-the-shelf with a network-accesible CLI or a
Linux/BSD system with a WiFi card that supports HostAP functionality).

Configuration information to run_test:

server     - the IP address of the server (automatically filled in)
client     - the IP address of the client (automatically filled in)
router     - the IP address of the WiFi AP/Router and the names of the
             wifi and wired devices to configure
"""

import os

from autotest_lib.server import site_host_attributes, site_wifitest


def run_server_tests(machine):
  client_attributes = site_host_attributes.HostAttributes(machine)

  args.append('router_addr=' + str(client_attributes.router_addr))
  args.append('server_addr=' + str(client_attributes.server_addr))

  site_wifitest.run_test_dir("network_WiFiSecMat", job, args, machine)
  site_wifitest.run_test_dir("network_WiFiMatFunc", job, args, machine)


parallel_simple(run_server_tests, machines)
