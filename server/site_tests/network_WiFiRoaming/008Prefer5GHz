# Copyright (c) 2010 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# This test run is designed to check that a 5GHz signal is preferred over 2.4
# GHz.

{ "name":"Prefer5GHz",
  "steps":[
    [ "create",         { "type":"hostap" } ],

    [ "config",         { "channel":"2412", "mode":"11g", "pureg":None } ],
    [ "config",         { "channel":"5240", "multi_interface":None } ],

    # Set the two APs to approximately the same power.
    [ "set_txpower",    { "interface":"managed0", "power":"fixed 0" } ],
    [ "set_txpower",    { "interface":"managed1", "power":"fixed 0" } ],

    [ "connect",        { "security":"none" } ],

    [ "client_ping",    { "count":"5", "ap":1 } ],

    # Verify that the client chose the 5GHz band.
    [ "client_check_frequency", [ "5240" ] ],

    [ "destroy" ],
  ],
}
